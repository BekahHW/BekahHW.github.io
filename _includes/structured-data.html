<!-- Website schema with search action -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ site.name }}",
  "url": "{{ site.production_url }}/",
  "description": "{{ site.description }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ site.production_url }}/search/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  },
  "author": {
    "@type": "Person",
    "name": "BekahHW"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.name }}"
  }
}
</script>

<!-- Blog schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "{{ site.name }} Blog",
  "description": "{{ site.description }}",
  "url": "{{ site.production_url }}/",
  "author": {
    "@type": "Person",
    "name": "BekahHW",
    "url": "{{ site.production_url }}/about"
  },
  "blogPost": [
    {% for post in site.posts limit:10 %}
    {
      "@type": "BlogPosting",
      "headline": "{{ post.title | escape }}",
      "url": "{{ site.production_url }}{{ post.url }}",
      "datePublished": "{{ post.date | date_to_xmlschema }}",
      "author": {
        "@type": "Person",
        "name": "{{ site.data.authors[post.author].name | default: post.author | default: 'BekahHW' }}"
      }
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>

{% if page.layout == 'post' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "{{ page.title | escape }}",
  "name": "{{ page.title | escape }}",
  "author": {
    "@type": "Person",
    "name": "{{ site.data.authors[page.author].name | default: page.author | default: 'BekahHW' }}",
    "url": "{{ site.production_url }}/about",
    "jobTitle": "Developer Advocate, Technical Content Strategist, Community Builder",
    "knowsAbout": ["Developer Relations", "Community Building", "Technical Writing", "Career Development", "Mental Health in Tech"],
    "sameAs": [
      "https://twitter.com/{{ site.twitter }}",
      "https://github.com/{{ site.github }}",
      "https://linkedin.com/in/{{ site.linkedin }}"
    ]
  },
  "datePublished": "{{ page.date | date: "%Y-%m-%d" }}",
  "dateModified": "{{ page.date | date: "%Y-%m-%d" }}",
  "description": "{{ page.description | default: page.excerpt | strip_html | truncate: 300 | escape }}",
  "url": "{{ site.production_url }}{{ page.url }}",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ site.production_url }}{{ page.url }}"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.name }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.production_url }}/assets/images/logo.png"
    }
  },
  "keywords": "{{ page.tags | join: ', ' }}{% if page.categories %}, {{ page.categories | join: ', ' }}{% endif %}",
  "articleSection": "{{ page.categories | first | default: 'Technology' }}",
  "wordCount": "{{ page.content | number_of_words }}",
  "inLanguage": "en-US",
  "isAccessibleForFree": "True",
  "license": "https://creativecommons.org/licenses/by-nc/4.0/",
  "citation": {
    "@type": "CreativeWork",
    "name": "{{ page.title | escape }}",
    "author": "{{ site.data.authors[page.author].name | default: page.author | default: 'BekahHW' }}"
  },
  "about": [
    {% if page.tags %}
    {% for tag in page.tags %}
    {
      "@type": "Thing",
      "name": "{{ tag }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
    {% endif %}
  ],
  "audience": {
    "@type": "Audience",
    "audienceType": "Software Developers, Career Changers, Community Builders, Tech Professionals, Bootcamp Graduates"
  },
  "educationalUse": "learning resource",
  "genre": "technical blog",
  "isFamilyFriendly": true,
  "accessibilityAPI": "ARIA",
  "accessibilityControl": "fullKeyboardControl",
  "accessibilityFeature": ["alternativeText", "readingOrder", "structuralNavigation"],
  "accessMode": "textual"
}
</script>
{% endif %}

{% if page.layout == 'page' or page.layout == 'default' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  {% if page.url contains '/search' %}
  "@type": "SearchResultsPage",
  {% elsif page.url contains '/archive' %}
  "@type": "CollectionPage",
  {% else %}
  "@type": "WebPage",
  {% endif %}
  "name": "{{ page.title | default: site.name }}",
  "description": "{{ page.description | default: site.description | escape }}",
  "url": "{{ site.production_url }}{{ page.url }}",
  "inLanguage": "en-US",
  "isAccessibleForFree": "True",
  "author": {
    "@type": "Person",
    "name": "BekahHW",
    "url": "{{ site.production_url }}/about",
    "jobTitle": "Developer Advocate, Technical Content Strategist, Community Builder",
    "knowsAbout": ["Developer Relations", "Community Building", "Technical Writing", "Career Development", "Mental Health in Tech"],
    "sameAs": [
      "https://twitter.com/{{ site.twitter }}",
      "https://github.com/{{ site.github }}",
      "https://linkedin.com/in/{{ site.linkedin }}",
      "https://www.youtube.com/{{ site.youtube | replace: '@', '' }}"
    ]
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ site.name }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ site.production_url }}/assets/images/logo.png"
    }
  },
  {% if page.url contains '/archive' %}
  "mainEntity": {
    "@type": "Blog",
    "name": "{{ site.name }} Blog Archive",
    "description": "Complete archive of all blog posts organized chronologically",
    "url": "{{ site.production_url }}/archive/",
    "author": {
      "@type": "Person",
      "name": "BekahHW"
    }
  },
  {% else %}
  "mainEntity": {
    "@type": "ProfessionalService",
    "name": "BekahHW Consulting",
    "description": "Developer Relations, Technical Content Strategy, and Community Building Services",
    "knowsAbout": ["Developer Experience", "Technical Content Strategy", "Community Building"],
    "url": "{{ site.production_url }}/consulting",
    "availableChannel": {
      "@type": "ServiceChannel",
      "serviceUrl": "{{ site.production_url }}/contact"
    },
    "provider": {
      "@type": "Person",
      "name": "BekahHW"
    }
  },
  {% endif %}
  "speakable": {
    "@type": "SpeakableSpecification",
    "cssSelector": ["article", ".post-content", ".site-content"]
  },
  "accessibilityAPI": "ARIA",
  "accessibilityControl": "fullKeyboardControl",
  "accessibilityFeature": ["alternativeText", "readingOrder", "structuralNavigation"],
  "accessMode": "textual"
}
</script>
{% endif %}

<!-- Breadcrumb structured data -->
{% unless page.url == "/" %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site.production_url }}/"
    },
    {% if page.categories and page.layout == 'post' %}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ page.categories | first | default: 'Blog' }}",
      "item": "{{ site.production_url }}/tag/{{ page.categories | first | default: 'blog' | downcase | replace: ' ', '-' }}/"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "{{ page.title | escape }}",
      "item": "{{ site.production_url }}{{ page.url }}"
    }
    {% else %}
    {
      "@type": "ListItem",
      "position": 2,
      "name": "{{ page.title | escape }}",
      "item": "{{ site.production_url }}{{ page.url }}"
    }
    {% endif %}
  ]
}
</script>
{% endunless %}
